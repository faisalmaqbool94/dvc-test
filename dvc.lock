schema: '2.0'
stages:
  titanic_data:
    cmd:
    - kaggle competitions download -c titanic -f train.csv -p data/
    - kaggle competitions download -c titanic -f test.csv -p data/
    outs:
    - path: data/test.csv
      md5: 029c9cd22461f6dbe8d9ab01def965c6
      size: 28629
    - path: data/train.csv
      md5: 61fdd54abdbf6a85b778e937122e1194
      size: 61194
  prepare:
    cmd: python3 code/prepare.py
    deps:
    - path: data/test.csv
      md5: 029c9cd22461f6dbe8d9ab01def965c6
      size: 28629
    - path: data/train.csv
      md5: 61fdd54abdbf6a85b778e937122e1194
      size: 61194
    outs:
    - path: data/test_prepared.pkl
      md5: c00ffdbb3c3104119af756a8c46c013c
      size: 32555
    - path: data/train_prepared.pkl
      md5: 83a78251a247cc8cf425c9f67d2d1e6a
      size: 74713
  train:
    cmd: python3 code/train.py
    deps:
    - path: code/train.py
      md5: d6461c40278072c0a6540bc2895f44ca
      size: 1945
    - path: data/test_prepared.pkl
      md5: c00ffdbb3c3104119af756a8c46c013c
      size: 32555
    - path: data/train_prepared.pkl
      md5: 83a78251a247cc8cf425c9f67d2d1e6a
      size: 74713
    params:
      params.yaml:
        train.solver: newton-cg
    outs:
    - path: metrics/metrics.json
      md5: 5868212ceddd0ecd0275fcfe724b4fec
      size: 115
    - path: models/bestModel.joblib
      md5: 6275402aaeb9eb1588da45505b191e06
      size: 75591
  inference:
    cmd: python3 code/inference.py
    deps:
    - path: code/inference.py
      md5: c1946d618de1af8e83447ad9db5c083d
      size: 286
    - path: data/test_prepared.pkl
      md5: c00ffdbb3c3104119af756a8c46c013c
      size: 32555
    - path: models/bestModel.joblib
      md5: 6275402aaeb9eb1588da45505b191e06
      size: 75591
    outs:
    - path: inference/predictions.csv
      md5: a0c9436078c89a5851bdcba55bbe25ac
      size: 2411
